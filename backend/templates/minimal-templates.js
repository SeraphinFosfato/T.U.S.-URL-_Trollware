// Template minimalisti per ridurre bandwidth
const minimalTemplates = {
  timer: (id, duration, nextUrl) => `<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Loading</title><style>body{font-family:Arial;background:#f0f0f0;margin:0;padding:20px;display:flex;align-items:center;justify-content:center;min-height:100vh}.w{background:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1);max-width:400px;text-align:center}.t{font-size:48px;color:#007bff;font-weight:bold;margin:20px 0}.p{width:100%;background:#e0e0e0;border-radius:10px;overflow:hidden;margin:20px 0;height:20px}.f{height:100%;background:#007bff;width:0%;transition:width 1s linear}.b{padding:15px 30px;font-size:18px;background:#28a745;color:#fff;border:none;border-radius:5px;cursor:pointer;margin-top:20px;display:none}.warn{color:#dc3545;font-weight:bold;display:none}</style></head><body><div class="w"><h2>üîÑ Loading...</h2><div class="t" id="t">${duration}</div><div class="p"><div class="f" id="f"></div></div><p id="s">Please wait</p><p class="warn" id="w">‚ö†Ô∏è Keep window active!</p><button class="b" id="b" onclick="location.href='${nextUrl}'">Continue</button></div><script>let s=${duration},i=null,paused=false,lastMouse=Date.now(),resuming=false;function start(){if(i)return;i=setInterval(()=>{if(paused||resuming||document.hidden||!document.hasFocus())return;s--;document.getElementById('t').textContent=s;document.getElementById('f').style.width=((${duration}-s)/${duration})*100+'%';if(s<=0){clearInterval(i);document.getElementById('s').textContent='‚úÖ Complete!';document.getElementById('b').style.display='inline-block';document.getElementById('t').style.color='#28a745'}},1000)}function pause(){if(paused||resuming)return;paused=true;document.getElementById('w').style.display='block';document.getElementById('s').textContent='‚ö†Ô∏è Keep window active!'}function resume(){if(!paused||resuming)return;resuming=true;setTimeout(()=>{document.getElementById('s').textContent='üîÑ Resuming timer...';const resumeTime=2000+Math.random()*3000;setTimeout(()=>{resuming=false;paused=false;document.getElementById('w').style.display='none';document.getElementById('s').textContent='Please wait'},resumeTime)},1500)}document.addEventListener('mousemove',()=>{lastMouse=Date.now();if(paused&&!resuming)resume()});document.addEventListener('visibilitychange',()=>{if(document.hidden)pause();else if(paused&&!resuming)resume()});window.addEventListener('focus',()=>{if(paused&&!resuming)resume()});window.addEventListener('blur',pause);setInterval(()=>{if(Date.now()-lastMouse>3000&&!paused&&!resuming)pause()},1000);setInterval(()=>{if((document.hidden||!document.hasFocus()||Date.now()-lastMouse>5000)&&!resuming&&!paused)pause()},2000);start()</script></body></html>`,
  
  click: (id, target, nextUrl) => `<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Loading</title><style>body{font-family:Arial;background:#f0f0f0;margin:0;padding:20px;display:flex;align-items:center;justify-content:center;min-height:100vh}.w{background:#fff;padding:40px;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1);max-width:400px;text-align:center}.b{background:#007bff;color:#fff;border:none;padding:15px 30px;font-size:18px;border-radius:5px;cursor:pointer;margin:15px;transition:all 0.2s}.b:hover{background:#0056b3;transform:scale(1.05)}.b:disabled{background:#6c757d;cursor:not-allowed;transform:none}</style></head><body><div class="w"><h3>üéØ Click Challenge</h3><div id="p">0/${target} clicks</div><button class="b" id="b" onclick="c()">Click Here</button></div><script>let n=0,lastClick=0;function c(){const now=Date.now();if(now-lastClick<500||n>=${target})return;lastClick=now;n++;document.getElementById('p').textContent=n+'/${target} clicks';const btn=document.getElementById('b');btn.disabled=true;setTimeout(()=>btn.disabled=false,500);if(n>=${target}){btn.textContent='Continue';btn.onclick=()=>location.href='${nextUrl}';btn.disabled=false}}</script></body></html>`,
  
  timer_punish: (id, duration, nextUrl) => `<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Loading</title><style>body{font-family:'MS Sans Serif',sans-serif;background:#c0c0c0;margin:0;padding:0;display:flex;align-items:center;justify-content:center;min-height:100vh;font-size:11px}.w{background:#c0c0c0;border:2px outset #c0c0c0;padding:15px;width:300px;box-shadow:2px 2px 4px rgba(0,0,0,0.3)}.title{margin-bottom:10px;font-weight:bold}.t{font-family:'Courier New',monospace;font-size:24px;color:#000080;margin:10px 0;text-align:center;background:#ffffff;border:1px inset #c0c0c0;padding:8px}.p{width:100%;height:20px;background:#ffffff;border:1px inset #c0c0c0;margin:10px 0;overflow:hidden}.f{height:100%;background:#000080;width:0%;transition:none}.status{margin:10px 0;color:#000000}.b{background:#c0c0c0;border:1px outset #c0c0c0;padding:4px 12px;font-size:11px;cursor:pointer;margin-top:10px;display:none;color:#000000}.b:hover{background:#d4d4d4}.b:active{border:1px inset #c0c0c0}</style></head><body><div class="w"><div class="title">Loading in progress...</div><div class="t" id="t">${duration}</div><div class="p"><div class="f" id="f"></div></div><div class="status" id="s">Please wait for completion</div><button class="b" id="b" onclick="location.href='${nextUrl}'">Continue</button></div><script>let s=${duration},orig=${duration},i=null,lastMouse=Date.now(),reloading=false;function start(){if(i||reloading)return;i=setInterval(()=>{if(document.hidden||!document.hasFocus()||reloading)return;s--;document.getElementById('t').textContent=s;document.getElementById('f').style.width=((orig-s)/orig)*100+'%';if(s<=0){clearInterval(i);i=null;document.getElementById('s').textContent='Completed';document.getElementById('b').style.display='inline-block';document.getElementById('t').textContent='OK';document.getElementById('b').style.color='#000000'}},1000)}function reload(){if(reloading)return;reloading=true;if('Notification'in window&&Notification.permission==='granted'){new Notification('‚ö†Ô∏è Active Waiting Required',{body:'Timer reset due to inactivity.'})}document.getElementById('s').textContent='Reloading due to inactivity...';setTimeout(()=>location.reload(),1500)}document.addEventListener('mousemove',()=>lastMouse=Date.now());document.addEventListener('visibilitychange',()=>{if(document.hidden&&!reloading)reload()});window.addEventListener('blur',()=>{if(!reloading)reload()});let idleCheck=setInterval(()=>{if(Date.now()-lastMouse>2000&&!reloading){clearInterval(idleCheck);reload()}},1000);if('Notification'in window&&Notification.permission!=='granted'){Notification.requestPermission()}start()</script></body></html>`
};

module.exports = { minimalTemplates };